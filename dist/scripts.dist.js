let pokemonRepository = function () { let e = [], t = document.querySelector("#modal-container"), n; function o() { let e = document.createElement("p"); e.innerText = "Loading...", e.classList.add("loading-message"), document.querySelector(".pokemon-list").appendChild(e) } function i() { let e = document.querySelector(".loading-message"); e && e.remove() } function l(t) { "object" == typeof t && "name" in t && "detailsUrl" in t ? e.push(t) : console.log("Invalid Pok\xe9mon object") } function a() { return e } function r(e) { return o(), fetch(e.detailsUrl).then(function (e) { return e.json() }).then(function (t) { i(), e.imageUrl = t.sprites.front_default, e.height = t.height, e.types = [], t.types.forEach(function (t) { e.types.push(t.type.name) }) }).catch(function (e) { i(), console.error(e) }) } function s(e) { r(e).then(function () { c(e) }) } function c(e) { let t = document.querySelector(".modal-title"), n = document.querySelector(".modal-body"); t.innerText = e.name, n.innerText = ""; let o = document.createElement("img"); o.classList.add("modal-img"), o.src = e.imageUrl, o.alt = e.name + "image"; let i = document.createElement("p"); i.innerText = "Height:" + e.height; let l = document.createElement("p"); l.innerText = "Types:" + e.types.join(","), n.appendChild(o), n.appendChild(i), n.appendChild(l), $("#pokemonModal").modal("show"); let a = document.createElement("button"); a.classList.add("modal-close"), a.innerText = "Close", a.addEventListener("click", d) } function d() { t.classList.remove("is-visible"), n && (n(), n = null) } return window.addEventListener("keydown", e => { "Escape" === e.key && t.classList.contains("is-visible") && d() }), t.addEventListener("click", e => { e.target === t && d() }), { add: l, getAll: a, addListItem: function e(t) { let n = document.querySelector(".pokemon-list"), o = document.createElement("li"); o.classList.add("list-group-item"); let i = document.createElement("button"); i.innerText = t.name, i.classList.add("button-class"), o.appendChild(i), n.appendChild(o), i.addEventListener("click", function () { s(t) }) }, loadList: function e() { return o(), fetch("https://pokeapi.co/api/v2/pokemon/?limit=150").then(function (e) { return e.json() }).then(function (e) { i(), e.results.forEach(function (e) { l({ name: e.name, detailsUrl: e.url }) }) }).catch(function (e) { i(), console.error(e) }) }, loadDetails: r, showDetails: s, showModal: c, hideModal: d, findByName: function t(n) { return e.filter(e => e.name.toLowerCase() === n.toLowerCase()) } } }(); pokemonRepository.loadList().then(function () { pokemonRepository.getAll().forEach(function (e) { pokemonRepository.addListItem(e) }) });